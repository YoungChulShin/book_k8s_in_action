# 9장 디플로이먼트: 선언적 애플리케이션 업데이트

9장에서 배우는 내용
- 쿠버네티스 클러스터에서 실행되는 애플리케이션을 업데이트하는 방법
- 쿠버네티스가 어떻게 무중단 업데이트 프로세스로 전환하는 데 도움을 주는지 설명

## 9.1 파드에서 실행중인 애플리케이션 업데이트
모든 파드를 업데이트하는 방법
- 기존 파드를 모두 삭제한 다음 새 파드를 시작한다
- 새로운 파드를 시작하고, 기동하면 기존 파드를 삭제한다

### 오래된 파드를 삭제하고 새 파드로 교체
방법
- 레플리케이션컨트롤러의 파드 템플릿을 업데이트 하는 방법
- 예를 들어 v1 파드 세트를 관리하는 RC가 있을 경우, 이미지 버전을 v2를 참조하도록 수정하면 변경 가능하다
- ![9-2](/images/9-2.jpg)

### 새 파드 기동과 이전 파드 삭제
다운타임을 발생시키지 않고 하려면 한번에 2개 버전의 애플리케이션을 모두 실행한 상태에서 변경해주는 과정이 필요하다
- 이 경우 하드웨어 리소스가 조금 더 필요하다

방법
1. 한번에 이전 버전에서 새 버전으로 전환하는 방법
   - 새 파드가 모두 실행되면 파드 앞단에 있는 서비스의 레이블 셀렉터를 새 버전으로 변경해준다
2. 롤링 업데이트 수행
   - 쿠버네티스에서 롤링 업데이트를 지원한다

## 9.2 RC로 자동 롤링 업데이트 수행